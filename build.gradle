buildscript {
  repositories {
    mavenCentral()
  }
  dependencies {
    classpath 'org.jetbrains.kotlin:kotlin-gradle-plugin:1.5.20'
  }
}

apply plugin: "kotlin"

repositories {
  mavenCentral()
}

dependencies {
  testImplementation 'org.jetbrains.kotlin:kotlin-stdlib:1.5.20'
  testImplementation 'org.jetbrains.kotlinx:kotlinx-coroutines-core:1.5.0'
  testImplementation 'org.junit.jupiter:junit-jupiter:5.7.2'
  testImplementation 'com.codeborne:selenide:5.22.1'
  testRuntimeOnly 'org.slf4j:slf4j-simple:1.7.31'
}

task libs(type: Sync) {
  from configurations.compileClasspath
  from configurations.testRuntimeClasspath
  into "$buildDir/lib"
}

compileKotlin.dependsOn libs

test {
  useJUnitPlatform()
  systemProperties = [
    'file.encoding'    : 'UTF-8',
    'selenide.headless': 'true',
    'BUILD_URL'        : System.getenv()['BUILD_URL'],
  ]
}
